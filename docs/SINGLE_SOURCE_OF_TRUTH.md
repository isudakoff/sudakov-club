# Sudakov.Club — Единственный Источник Правды

> **Коротко:** Sudakov.Club — приватный семейный цифровой хаб для общения, совместной жизни и сохранения наследия семьи **Судаковых**. Комбинация приватности, удобства и долгоживущего архива мудрости: чаты, медиа, события, проекты, профили, родословная и передача знаний между поколениями. По архитектуре — **федеративная/децентрализованная** модель (по духу похожая на Mastodon), но с **понятной “центральной” публичной точкой входа** для узнаваемости и онбординга.

---

## 0) Для чего этот документ
- Это **единый исходник правды** (SSOT) о продукте: зачем, для кого, что именно делаем, как это должно работать **сейчас и в будущем**.
- На основании этого файла будут:
  - заводиться задачи (issues) и эпики,
  - генерироваться промпты для ИИ-агентов,
  - приниматься архитектурные решения,
  - планироваться релизы и UX-исследования.
- Обновляется **итеративно**, изменения — через PR.

---

## 1) Видение (Vision)

**Мы строим цифровой семейный дом** — **приватный, тёплый, полезный и долговечный**.  
Цель — **сплотить семью**, дать пространство, где удобно **общаться, делиться и сохранять**: медиа, истории, опыт, семейные проекты и традиции. Не просто ещё одна “соцсеть”, а **хаб семьи**, где **мудрость накапливается и передаётся**.

Ключевая мысль:  
- В обычных соцсетях люди разобщены, тонут в шуме и алгоритмах.  
- Нам нужна **другая направленность**: **укрепление института семьи**, видимость друг друга, совместные дела, **наследие**.  
- Хочется, чтобы **пра-правнуки** могли **прочитать почти всё**, что писали их предки, и **почувствовать связь**.

**Архитектурно:**  
- **Децентрализация/федерация** (как у Mastodon): возможность **хостить у себя**, владеть своими данными и доступами.  
- Одновременно — **публичная, “всем понятная” центральная точка** (портал/координатор), чтобы людям было легче понять, “что это за штука” и где начать.  
- На **ранних этапах закладываем** протокольные и модельные решения под федерацию (идентификация, адресация, шаринг, переносимость данных), чтобы **без боли расширяться**.

---

## 2) Принципы

1. **Family-Centric:** все решения через призму семьи и её удобства.  
2. **Privacy & Security by Design:** приватность по умолчанию, **гранулярные** права доступа, прозрачные политики хранения.  
3. **Engagement & Usability:** простота и радость использования для **всех возрастов** (включая старшее поколение).  
4. **Scalability & Longevity:** система должна **жить десятилетиями**: переносимость данных, расширяемость, совместимость.  
5. **Ownership:** семья владеет своими данными; **самостоятельный хостинг** возможен.  
6. **Clarity:** минимум магии; понятная модель сущностей и прав.  
7. **Iterative Delivery:** делим на фазы, каждую подтверждаем исследованиями и обратной связью.

---

## 3) Чем мы отличаемся от соцсетей

- **Не про лайки и гонку охвата**, а про **связь и совместность**.  
- **Без алгоритмической дробилки** ленты: важное — на виду, **по семейным правилам**, а не по интересам рекламодателей.  
- **Вечность архива**: не исчезающие сторис, а **семейная библиотека жизни** (истории, фото, видео, письма, “капсулы времени”).  
- **Приватность и делегирование доступа**: “своё” остаётся своим, доступ — **осознанный** и управляемый.

---

## 4) Пользователи и сценарии

### 4.1 Персоны (направляющие; могут уточняться)
- **Родитель-админ**: управляет доступами, приглашает, настраивает приватность.  
- **Организатор событий**: дни рождения, встречи, поездки, семейные созвоны.  
- **Молодой член семьи**: чаты, быстрый обмен медиа, сторителлинг.  
- **Бабушка/дедушка**: пассивный просмотр, простые публикации, минимализм UI.  
- **Куратор архива**: сканирует/структурирует старые фото/документы, поддерживает каталог.  
- **Гость/внешний родственник**: ограничённый доступ по приглашению/ссылке.

### 4.2 Ключевые сценарии
- **Чаты и обсуждения** (1:1, семейные, по проектам/событиям).  
- **Общие альбомы и сторителлинг** (фото/видео, подписи, теги, гео, лица).  
- **Семейные события** (приглашения, опросы, списки задач/покупок).  
- **Проекты** (совместные планы: ремонт, поездка, подарок, архивирование).  
- **Наследие/мудрость**: письма потомкам, “чему я научился”, **декларации передачи знаний/умений**, “капсулы времени”.  
- **Родословная**: древо, биографии, даты, связи, **ссылки на архив**.  
- **Гостевой доступ**: “посмотреть альбом свадьбы” или “отдельную ветку древа” с датой истечения и логом.

---

## 5) Функциональные области (MVP → дальше)

### 5.1 MVP (первый работающий инкремент)
- **Аккаунты и семьи**: регистрация, профиль, принадлежность к семье.  
- **Приглашения и роли** (RBAC): Admin, Editor, Member, Guest.  
- **Базовая приватность**: уровни видимости (личное / семья / расширенно / по ссылке).  
- **Чат + лента**: текст, фото/видео, реакции, упоминания.  
- **Альбомы/Медиа**: загрузка, теги, права на альбом, простая модерация.  
- **События**: карточка события, приглашения, RSVP, напоминания.  
- **Поиск**: по людям, альбомам, событиям, сообщениями.  
- **Аудит/журнал**: кто что создал/изменил/расшарил.  
- **Мобильные клиенты** (минимум PWA; натив — постепенно).  
- **Центральный портал**: понятное описание, онбординг и маршрутизация в конкретные семейные узлы (ноды).

### 5.2 После MVP (эволюция)
- **Родословная** с визуализацией и связью с архивом.  
- **Наследие/капсулы времени**: отложенные публикации, подтверждённые хранители.  
- **Проекты/таски**: небольшие канбан-доски, чек-листы.  
- **Архив/Каталог**: OCR для старых фото/документов, версии, расшифровки.  
- **Федерация**: подписки между семейными нодами, адресуемость контента, перенос аккаунта/данных.  
- **Мультимедиа в реальном времени**: совместные фото-потоки, мини-стримы семейных событий.  
- **Механики вовлечения**: тематические недели, хроника “в этот день”, семейные награды.

---

## 6) Децентрализация и “центральная точка”

### 6.1 Децентрализация/федерация
- **Каждая семья может развернуть собственный узел** (ноду) с **полным контролем**: пользователи, данные, домен, бэкапы.  
- **Протокольные основы** закладываются с начала (идентификаторы сущностей, адресация, подписи, политика шаринга).  
- Вектор совместимости с открытыми стандартами (по духу **ActivityPub** и родственные практики) — анализ и прототипирование на ранней стадии.

### 6.2 Центральный портал
- **Публичная “понятная” витрина**: объясняет, что такое Sudakov.Club, как начать, как подключиться/развернуть у себя.  
- **Координация и онбординг**: помощь в создании семейных узлов, справка, шаблоны политик.  
- **Без централизованного хранения приватных данных** семей — **роль навигатора**, не “большой базы”.

---

## 7) Модель данных (верхнеуровнево)

**Сущности (ядро):**  
`Family, Member, Role, Permission, Profile, Post, Comment, Thread, Chat, Message, Album, Media, Tag, Event, RSVP, Task, Project, KnowledgeEntry (Наследие), TimeCapsule, GenealogyNode, ShareLink, AccessInvitation, AuditLog, Notification, Settings`

**Связки:**  
- `Family 1—N Member`, `Member 1—N Role` (через MemberRole или Role на Member),  
- `Member 1—N Post/Album/Event/Project/...`,  
- `Album 1—N Media`, `Thread 1—N Message`,  
- `GenealogyNode` связывает людей/ветки; ссылается на `Media`, `KnowledgeEntry`.  
- `ShareLink` и `AccessInvitation` управляют внешним доступом.  
- `AuditLog` фиксирует действия.  
- `Settings` на уровнях: узла, семьи, пользователя.

**Приватность (уровни):**  
- `Private` (только я), `Family` (семья), `Extended` (избранные/родня), `Link` (по ссылке, срок действия).  
- Политики на уровне **сущности и поля** (например, скрыть гео/лица).

---

## 8) Приватность, безопасность, владение данными

- **Шифрование** в транзите; хранение с учётом среды (ротация ключей, секреты вынесены).  
- **RBAC/ABAC**: роли и контекстные правила (владелец контента, админ семьи, гость, срок доступа).  
- **Жизненный цикл данных**: ретенция, экспорт, перенос, удаление (“право на забвение”).  
- **Журналы (AuditLog)**: доступ/шары/изменения; отслеживаем аномалии.  
- **Согласия и явные действия**: шаринг всегда traceable и отзывной.  
- **Самостоятельный хостинг**: владелец узла отвечает за территориальные и правовые аспекты хранения.  
- **Резервные копии и восстановление**: политика бэкапов, проверки восстановления.

---

## 9) UX-принципы

- **Простота для всех возрастов**: крупные кликабельные элементы, понятные подписи, минимум скрытых жестов.  
- **Доступность (a11y)**: контраст, текст-to-speech, альтернативные описания медиа.  
- **Надёжность действий**: отмена/повтор, “безопасные” предпросмотры шаринга.  
- **Прозрачность приватности**: видимый индикатор уровня доступа, подсказки “кто увидит это”.

---

## 10) Метрики успеха (ориентиры)

- **Активация**: доля прошедших онбординг и совершивших 1-е ключевые действия (создал пост/альбом/событие).  
- **Вовлечённость**: DAU/WAU/MAU, доля активных чатов/альбомов/событий, время в полезных сценариях.  
- **Совместность**: количество совместных альбомов/проектов/событий на семью.  
- **Наследие**: добавления в `KnowledgeEntry`, “капсулы времени”, связки с `GenealogyNode`.  
- **Приватность**: 0 инцидентов; доля контента с корректно настроенными правами.  
- **Удержание**: 4-, 12-недельный ретеншн семей.

---

## 11) Дорожная карта (фазы)

**Фаза 1 — Планирование и фундамент**  
- Каркас проекта, модели базового уровня, аутентификация, RBAC, приватность по умолчанию, медиа-минимум, чаты/лента, события (MVP).  
- Центральный портал как **витрина и онбординг**.

**Фаза 2 — Архив и родословная**  
- Расширенная медиа-система, каталог, OCR/теги, `GenealogyNode`, связки с `KnowledgeEntry`.

**Фаза 3 — Федерация**  
- Идентификаторы, подписки между узлами, перенос аккаунта/данных, межузловой шаринг.

**Фаза 4 — Расширение взаимодействия**  
- Проекты/таски, механики вовлечения, “в этот день”, нативные мобильные приложения.

*(Фактический план разработки будет декомпозирован в issues/эпики; этот раздел — опорная карта.)*

---

## 12) Минимальные технические ориентиры (предварительно)

> **Важно:** мы “кодим через ИИ-агентов”, поэтому формулируем ориентиры как **ограничения и интерфейсы** для будущей автоматизации. Точные стеки могут уточняться по мере итераций.

- **Серверное ядро:** PHP 8.3+ (Laravel 11) — логика, REST/JSON API.  
- **Реалтайм:** WebSocket/SSE (например, Laravel WebSockets/Socket.io) для чатов/уведомлений.  
- **Хранилище:** Postgres или MySQL; Redis — кеш/очереди; S3-совместимое хранилище для медиа.  
- **Контейнеризация:** Docker + docker-compose; dev-makefile; GitHub Actions для CI.  
- **Клиент:** SPA/PWA (Vue/React) → нативные iOS/Android постепенно.  
- **Модульность:** доменные модули (семьи, медиа, события, чаты, наследие, родословная).  
- **Интернационализация:** RU/EN как минимум; локализуемые поля и форматы.  
- **Экспорт/импорт:** JSON/ZIP профили, медиа-пакеты, переносимость семьи между узлами.

---

## 13) Примеры того, “как это должно работать в будущем”

- **Чтение наследия предков:** правнук открывает профиль прадеда, читает его письма “что я понял к 60 годам”, смотрит фотоальбом “Наш 1987”, видит “капсулу времени”, открытую по дате.  
- **Семейный проект-подарок:** к юбилею дедушки создаётся скрытый проект: задачи, покупка подарков, общий альбом со сбором фото/видео-поздравлений; доступ только участникам.  
- **Родословная с цитатами:** узлы древа связаны с историями, аудио-воспоминаниями, фотокарточками, письмами.  
- **Гостевой доступ по ссылке:** друзья семьи смотрят **только** альбом свадьбы; срок ссылки — 14 дней; все действия логируются.  
- **Событие “Большая встреча”**: RSVP, список блюд, чат мероприятия, геометки, общий фотопоток в день встречи, автосбор альбома.

---

## 14) Риски и как мы их закрываем (кратко)

- **Приватность/утечки** → по умолчанию приватные уровни, audit, отзыв доступа, бэкапы/восстановление.  
- **Сложность для старших** → упрощённые режимы UI, крупные элементы, пошаговые мастера.  
- **Переезд/совместимость** → формат экспорта/импорта, стабильные идентификаторы.  
- **Рост и производительность** → очереди, кеши, CDN для медиа, горизонтальное масштабирование.  
- **Федерация** → поэтапное внедрение, флаги фич, тестовые узлы.

---

## 15) Термины (глоссарий)

- **Узел/нода** — самостоятельный инстанс Sudakov.Club (семейный сервер).  
- **Центральный портал** — публичная витрина/онбординг без хранения приватных данных семей.  
- **Наследие (KnowledgeEntry)** — записи с жизненным опытом/советами/историями; может быть отложенная публикация (“капсулы времени”).  
- **Родословная (GenealogyNode)** — структурированная модель родственников и связей.  
- **Уровни приватности** — Private / Family / Extended / Link (со сроком).

---

## 16) Как использовать этот документ в разработке

- **README.md** (короткий) → ссылка на этот файл и быстрый старт.  
- Этот документ → **источник для генерации промптов** ИИ-агентам: из разделов 5–12 формируем конкретные “Step X.Y” задачи.  
- Любая новая фича/решение должно **согласоваться** с принципами из разделов 1–3 и ограничениями 8/12.

---

## 17) Следующие шаги (инициация репозитория)

1. Создать репозиторий `sudakov-club`.  
2. В корне: короткий `README.md` со ссылкой на `docs/PRODUCT_VISION.md`.  
3. Добавить папки: `docs/`, `architecture/`, `specs/`, `prompts/agents/`.  
4. Сформировать первый **пакет промптов** для ИИ-агентов: каркас проекта, базовые модели, аутентификация, RBAC и медиа-минимум (см. Step 1.x).

---

_Версия документа: v0.1 (инициализация). Обновлять по мере уточнения требований и результатов исследований._
